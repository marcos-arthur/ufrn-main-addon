{"version":3,"sources":["../../scripts/main.ts","../../scripts/Q0000/Q0000.ts","../../scripts/Utilities.ts","../../scripts/Q0000/dialogues.ts","../../scripts/Q0001/Q0001.ts"],"sourcesContent":["import { world, system } from \"@minecraft/server\";\r\n// import * as GameTest from \"@minecraft/server-gametest\";\r\n\r\nimport Quest0000 from \"./Q0000/Q0000\";\r\nimport Quest0001 from \"./Q0001/Q0001\";\r\nimport Utilities from \"./Utilities\";\r\n\r\nconst START_TICK = 100;\r\n\r\n// global variables\r\nlet curTick = 0;\r\n\r\n// world.afterEvents.playerSpawn.subscribe((eventData) => {\r\n//   let { player, initialSpawn } = eventData;\r\n//   if (!initialSpawn) return;\r\n\r\n//   player.sendMessage(`your id is ${player.id}`);\r\n// });\r\n\r\n// GameTest.register(\"QuestTests\", \"Q0000\", Quest0000.runQuest).maxTicks(100);\r\n\r\n//20 ticks per second\r\nfunction gameTick() {\r\n  // try {\r\n  if (system.currentTick > START_TICK && system.currentTick % 20 === 0) {\r\n    Quest0000.runQuest();\r\n    Quest0001.runQuest();\r\n  }\r\n\r\n  if (system.currentTick > START_TICK && system.currentTick % 60 === 0) {\r\n    world.getAllPlayers();\r\n  }\r\n\r\n  if (curTick === START_TICK) {\r\n  }\r\n  // } catch (e) {\r\n  //   console.warn(\"Tick error: \" + e);\r\n  // }\r\n\r\n  // if (system.currentTick % 100 === 0) {\r\n  //   world.sendMessage(\"Hello starter! Tick: \" + system.currentTick);\r\n  // }\r\n\r\n  system.run(gameTick);\r\n}\r\n\r\nsystem.run(gameTick);\r\n","import { world, Vector3, Dimension } from \"@minecraft/server\";\r\nimport Utilities from \"../Utilities\";\r\nimport Q0000Dialogues from \"./dialogues\";\r\n\r\nconst intialPrisonCoord: Vector3 = { x: 218, y: -8, z: 190 };\r\n\r\nexport default class Quest0000 {\r\n  static runQuest() {\r\n    world.getPlayers({ excludeTags: [\"wasImprisoned\", \"Q0000\"] }).forEach((_player) => {\r\n      _player.teleport(intialPrisonCoord, {\r\n        facingLocation: { x: intialPrisonCoord.x + 3, y: intialPrisonCoord.y - 1, z: intialPrisonCoord.z },\r\n      });\r\n      _player.addTag(\"wasImprisoned\");\r\n      _player.addTag(\"Q0000\");\r\n    });\r\n    world.getPlayers({ tags: [\"Q0000\"], excludeTags: [\"Q0000_01\"] }).forEach((_player) => {\r\n      _player.addTag(\"Q0000_01\");\r\n      Utilities.displayDialogueInit(Q0000Dialogues.insideCellDialogue(_player), _player);\r\n    });\r\n    Utilities.getPlayersInVolume({ x: 248, y: -9, z: 150 }, 2, [\"Q0000\"], [\"Q0000_05\", \"Q0000_06\"]).forEach(\r\n      (player) => {\r\n        player.addTag(\"Q0000_05\");\r\n      }\r\n    );\r\n    world.getPlayers({ tags: [\"Q0000_05\"] }).forEach((player) => {\r\n      player.removeTag(\"Q0000_05\");\r\n      player.addTag(\"Q0000_06\");\r\n      Utilities.displayDialogueInit(Q0000Dialogues.elevatorPitDialogue(player), player);\r\n    });\r\n  }\r\n}\r\n","import { world, Dimension, RawMessage, Player, system, BlockPermutation, Vector3 } from \"@minecraft/server\";\r\n\r\nexport default class Utilities {\r\n  static fillBlock(\r\n    blockPerm: BlockPermutation,\r\n    xFrom: number,\r\n    yFrom: number,\r\n    zFrom: number,\r\n    xTo: number,\r\n    yTo: number,\r\n    zTo: number\r\n  ) {\r\n    const overworld = world.getDimension(\"overworld\");\r\n\r\n    for (let i = xFrom; i <= xTo; i++) {\r\n      for (let j = yFrom; j <= yTo; j++) {\r\n        for (let k = zFrom; k <= zTo; k++) {\r\n          overworld.getBlock({ x: i, y: j, z: k })?.setPermutation(blockPerm);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  static fourWalls(\r\n    perm: BlockPermutation,\r\n    xFrom: number,\r\n    yFrom: number,\r\n    zFrom: number,\r\n    xTo: number,\r\n    yTo: number,\r\n    zTo: number\r\n  ) {\r\n    const overworld = world.getDimension(\"overworld\");\r\n\r\n    for (let i = xFrom; i <= xTo; i++) {\r\n      for (let k = yFrom; k <= yTo; k++) {\r\n        overworld.getBlock({ x: i, y: k, z: zFrom })?.setPermutation(perm);\r\n        overworld.getBlock({ x: i, y: k, z: zTo })?.setPermutation(perm);\r\n      }\r\n    }\r\n\r\n    for (let j = zFrom + 1; j < zTo; j++) {\r\n      for (let k = yFrom; k <= yTo; k++) {\r\n        overworld.getBlock({ x: xFrom, y: k, z: j })?.setPermutation(perm);\r\n        overworld.getBlock({ x: xTo, y: k, z: j })?.setPermutation(perm);\r\n      }\r\n    }\r\n  }\r\n\r\n  static displayDialogue(_dialogue_list: Array<RawMessage>, _player: Player, _index: number) {\r\n    if (_index === _dialogue_list.length) return;\r\n\r\n    system.runTimeout(() => {\r\n      _player.onScreenDisplay.setActionBar(_dialogue_list[_index]);\r\n      this.displayDialogue(_dialogue_list, _player, ++_index);\r\n    }, 20 * 4);\r\n  }\r\n\r\n  /**\r\n   * Exibe na tela do jogador um diálogo corrido.\r\n   * Cada caixa de diálogo é um RawMessage na lista\r\n   * @param _dialogue_list Lista com os diálogos\r\n   * @param _player Jogador para o qual o diálogo será exibido\r\n   * @returns void\r\n   */\r\n  static async displayDialogueInit(_dialogue_list: Array<RawMessage>, _player: Player) {\r\n    if (_dialogue_list.length === 0) return;\r\n\r\n    _player.onScreenDisplay.setActionBar(_dialogue_list[0]);\r\n    this.displayDialogue(_dialogue_list, _player, 1);\r\n  }\r\n\r\n  // const display_dialogue = (dialogue_list: Array<object>, player: Player, index: number) => {\r\n\r\n  /**\r\n   * Retorna uma lista com os jogadores dentro de um volume.\r\n   * @param _location Coordenadas do centro do local no mundo para ser verificado\r\n   * @param _maxDistante Raio de verificação\r\n   * @param _tags Tags para inculir somente os jogadores que possuem elas\r\n   * @param _excludeTags Tags para ignorar os jogadores que possuem elas\r\n   * @returns Player[]\r\n   */\r\n  static getPlayersInVolume(\r\n    _location: Vector3,\r\n    _maxDistance: number,\r\n    _tags?: string[],\r\n    _excludeTags?: string[]\r\n  ): Player[] {\r\n    let playersInVolume: Player[] = [];\r\n\r\n    world\r\n      .getDimension(\"overworld\")\r\n      .getEntities({\r\n        location: _location,\r\n        maxDistance: _maxDistance,\r\n        tags: _tags,\r\n        excludeTags: _excludeTags,\r\n      })\r\n      .forEach((_entity) => {\r\n        // console.warn(_entity.nameTag + \"\\n\");\r\n        if (_entity.typeId === \"minecraft:player\") {\r\n          playersInVolume.push(_entity as Player);\r\n        }\r\n      });\r\n\r\n    // ItemStack;\r\n    // MinecraftItemTypes.WritableBook;\r\n\r\n    return playersInVolume;\r\n  }\r\n}\r\n","import { Player } from \"@minecraft/server\";\r\n\r\nexport default class Q0000Dialogues {\r\n  static insideCellDialogue(_player: Player) {\r\n    return [\r\n      {\r\n        rawtext: [\r\n          {\r\n            text: `§uRádio Walk Talk: §rEi, ${_player.name}\\nÉ hora de escapar. Só siga o que eu disser e você vai sair dessa.`,\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        rawtext: [\r\n          {\r\n            text: \"§uRádio Walk Talk: §rNão importa quem eu sou no momento. \\nO que importa é que você siga o que eu vou falar.\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        rawtext: [\r\n          {\r\n            text: \"§uRádio Walk Talk: §rPrimeiro, estou hackeando a porta da sua cela. \\nPorém só vou conseguir deixá-la aberta por um breve momento.\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        rawtext: [\r\n          {\r\n            text: \"§uRádio Walk Talk: §rMe informe quando você estiver pronto para que eu possa abrir.\",\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n  }\r\n\r\n  static elevatorPitDialogue(_player: Player) {\r\n    return [\r\n      {\r\n        rawtext: [\r\n          {\r\n            text: `§uRádio Walk Talk: §rParabéns agora que você conseguir chegar são e salvo até aqui.`,\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        rawtext: [\r\n          {\r\n            text: \"§uRádio Walk Talk: §rVamos continuar nosso progresso para sair dessa prisão.\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        rawtext: [\r\n          {\r\n            text: \"§uRádio Walk Talk: §rEste local é o fosso do elevador. Veja que existe uma forma de escalar\",\r\n          },\r\n        ],\r\n      },\r\n      {\r\n        rawtext: [\r\n          {\r\n            text: \"§uRádio Walk Talk: §rMas tenha cuidado para não cair, este local é perigoso.\",\r\n          },\r\n        ],\r\n      },\r\n    ];\r\n  }\r\n}\r\n","import { world, Vector3 } from \"@minecraft/server\";\r\nimport Utilities from \"../Utilities\";\r\nimport Q0000Dialogues from \"./dialogues\";\r\nimport Q0001Dialogues from \"./dialogues\";\r\n\r\nexport default class Quest0001 {\r\n  static runQuest() {\r\n    world.getPlayers({ tags: [\"Q0001_01\"] }).forEach((player) => {\r\n      player.removeTag(\"Q0001_01\");\r\n      player.addTag(\"Q0001_02\");\r\n      // Utilities.displayDialogueInit(Q0001Dialogues.afterEscapeDialogue(player), player);\r\n    });\r\n  }\r\n}\r\n"],"mappings":"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","names":["world","system","world","world","world","system","world"],"file":"../scripts/main.js"}